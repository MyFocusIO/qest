<div class="page-header">
  <h1>Topic: {{topic}}</h1>
</div>
<div class="row">
  <div class="span14">
    <form method="post">
      <fieldset>
        <div class="clearfix">
          <label for="payload">Content</label>
          <div class="input">
            <textarea id="payload" name="payload" class="xxlarge" rows="10">{{value.payload}}</textarea>
          </div>
        </div>
        <div class="actions">
          <input id="update" type="submit" class="btn success" value="Update"></input>
        </div>
      </fieldset>
    </form>
  </div>
</div>

<script type="text/javascript" src="/socket.io/socket.io.js"></script>
<script type="text/javascript">
  socket = io.connect()

  socket.on("/topics/{{topic}}", function(data) {
    $("#payload").val(data);
  });

  $("#update").click(function() {
    $.post("/topics/{{topic}}", { "_method": "put", payload: $("#payload").val() });
    return false;
  });

</script>
